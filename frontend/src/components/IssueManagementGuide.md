# 이의신청 관리 시스템 가이드

## 개요

이의신청 관리 시스템은 품질 검수 과정에서 제출된 이의신청들을 체계적으로 관리하고 처리할 수 있는 종합적인 관리 도구입니다.

## 주요 기능

### 1. 종합적인 이의신청 관리
- **실시간 목록 조회**: 모든 이의신청을 실시간으로 확인
- **상태별 관리**: 대기중, 해결됨, 반려됨 상태 관리
- **처리 이력 추적**: 모든 처리 활동 자동 기록
- **관리자 정보 추적**: 처리한 관리자 정보 저장

### 2. 고급 필터링 시스템
- **상태 필터**: 대기중, 해결됨, 반려됨
- **심각도 필터**: 낮음, 보통, 높음, 심각
- **카테고리 필터**: 9가지 문제 유형별 필터링
- **날짜 범위 필터**: 오늘, 최근 7일, 최근 30일
- **실시간 검색**: 사진 ID, 내용, 요청 ID, 검수자 ID 검색

### 3. 일괄 처리 기능
- **다중 선택**: 여러 이의신청 동시 선택
- **일괄 해결**: 선택된 이의신청들을 한 번에 해결
- **일괄 반려**: 선택된 이의신청들을 한 번에 반려
- **선택 해제**: 전체 선택 해제

### 4. 상세 정보 관리
- **상세 정보 모달**: 각 이의신청의 완전한 정보 확인
- **처리 메모**: 해결/반려 시 메모 작성 가능
- **처리자 정보**: 처리한 관리자와 처리 시간 기록
- **이력 추적**: 생성일, 수정일, 해결일 추적

### 5. 통계 대시보드
- **실시간 통계**: 전체, 대기중, 해결됨, 반려됨 개수
- **시각적 표시**: 색상 코딩된 상태 표시
- **트렌드 분석**: 시간별 처리 현황 파악

## 컴포넌트 사용법

### 기본 사용법

```jsx
import IssueManagement from './IssueManagement';

function App() {
  const handleIssueUpdated = (updateInfo) => {
    console.log('이의신청 업데이트됨:', updateInfo);
    // 추가 처리 로직
  };

  return (
    <IssueManagement
      adminId="admin123"
      onIssueUpdated={handleIssueUpdated}
    />
  );
}
```

### 고급 사용법

```jsx
<IssueManagement
  adminId="admin123"
  onIssueUpdated={handleIssueUpdated}
  showResolved={true}
  enableBulkActions={true}
/>
```

## Props 설명

| Prop | Type | Required | Default | Description |
|------|------|----------|---------|-------------|
| `adminId` | string | ✅ | - | 관리자 ID |
| `onIssueUpdated` | function | ❌ | - | 이의신청 업데이트 시 호출되는 콜백 |
| `showResolved` | boolean | ❌ | true | 해결된 이의신청 표시 여부 |
| `enableBulkActions` | boolean | ❌ | true | 일괄 처리 기능 활성화 여부 |

## 데이터 구조

### 이의신청 데이터 (qualityIssues collection)
```javascript
{
  id: "issue123",
  requestId: "request456",
  photoId: "photo789",
  reviewerId: "reviewer101",
  category: "blur",
  severity: "medium",
  comment: "사진이 흐려서 세부사항을 확인하기 어렵습니다.",
  suggestedAction: "더 선명한 사진으로 재촬영해주세요.",
  status: "pending", // pending, resolved, rejected
  createdAt: Timestamp,
  updatedAt: Timestamp,
  resolvedAt: Timestamp, // null if pending
  resolvedBy: "admin123", // null if pending
  resolutionNote: "재촬영 완료로 해결됨" // optional
}
```

## 필터링 시스템

### 상태별 필터
- **all**: 모든 상태
- **pending**: 대기중
- **resolved**: 해결됨
- **rejected**: 반려됨

### 심각도별 필터
- **all**: 모든 심각도
- **low**: 낮음
- **medium**: 보통
- **high**: 높음
- **critical**: 심각

### 카테고리별 필터
- **all**: 모든 카테고리
- **blur**: 흐림/초점 문제
- **exposure**: 노출/밝기 문제
- **composition**: 구도/각도 문제
- **lighting**: 조명 문제
- **resolution**: 해상도 문제
- **color**: 색상/화질 문제
- **content**: 내용/구성 문제
- **technical**: 기술적 문제
- **other**: 기타

### 날짜 범위 필터
- **all**: 모든 기간
- **today**: 오늘
- **week**: 최근 7일
- **month**: 최근 30일

## 정렬 옵션

### 정렬 기준
- **createdAt**: 생성일
- **updatedAt**: 수정일
- **severity**: 심각도
- **category**: 카테고리

### 정렬 순서
- **asc**: 오름차순
- **desc**: 내림차순

## 처리 프로세스

### 1. 이의신청 목록 확인
- 모든 이의신청이 테이블 형태로 표시
- 상태, 심각도, 카테고리별 색상 코딩
- 생성일, 수정일, 해결일 표시

### 2. 필터링 및 검색
- 다양한 조건으로 필터링
- 실시간 검색으로 빠른 찾기
- 필터 조합으로 정확한 결과

### 3. 개별 처리
- 각 이의신청의 "해결" 또는 "반려" 버튼 클릭
- 처리 메모 작성 (선택사항)
- 자동으로 처리자 정보와 시간 기록

### 4. 일괄 처리
- 여러 이의신청 선택
- "일괄 해결" 또는 "일괄 반려" 버튼 클릭
- 확인 후 일괄 처리 실행

### 5. 상세 정보 확인
- "상세 보기" 버튼으로 모달 열기
- 완전한 이의신청 정보 확인
- 처리 이력 및 메모 확인

## 상태별 색상

### 상태 색상
- **대기중**: 노란색 (bg-yellow-100 text-yellow-800)
- **해결됨**: 녹색 (bg-green-100 text-green-800)
- **반려됨**: 빨간색 (bg-red-100 text-red-800)

### 심각도 색상
- **낮음**: 파란색 (bg-blue-100 text-blue-800)
- **보통**: 노란색 (bg-yellow-100 text-yellow-800)
- **높음**: 주황색 (bg-orange-100 text-orange-800)
- **심각**: 빨간색 (bg-red-100 text-red-800)

## 통계 시스템

### 실시간 통계
- **전체**: 모든 이의신청 개수
- **대기중**: 처리 대기 중인 이의신청 개수
- **해결됨**: 해결된 이의신청 개수
- **반려됨**: 반려된 이의신청 개수

### 통계 업데이트
- 이의신청 상태 변경 시 자동 업데이트
- 필터링 결과에 따른 실시간 반영
- 시각적 피드백 제공

## 에러 처리

### 네트워크 오류
- 이의신청 로드 실패 시 에러 메시지
- 상태 업데이트 실패 시 롤백
- 재시도 메커니즘 제공

### 검증 오류
- 필수 필드 누락 시 경고
- 잘못된 데이터 형식 시 검증
- 사용자 친화적 에러 메시지

### 사용자 피드백
- 로딩 상태 표시
- 처리 중 상태 표시
- 성공/실패 메시지 표시

## 성능 최적화

### 데이터 최적화
- 필요한 데이터만 로드
- 페이지네이션 적용
- 캐싱 전략 사용

### UI 최적화
- 가상 스크롤링 (대용량 데이터)
- 지연 로딩
- 컴포넌트 메모이제이션

## 보안 고려사항

### 데이터 접근 제어
- 관리자 권한 확인
- 이의신청별 접근 권한 검증
- 민감한 정보 보호

### 입력 검증
- 사용자 입력 데이터 검증
- XSS 공격 방지
- SQL 인젝션 방지

## 확장 가능성

### 추가 기능
- 이메일 알림 시스템
- 보고서 생성 및 내보내기
- 고급 분석 도구
- 워크플로우 자동화

### 통합 가능성
- 알림 시스템 연동
- 외부 시스템 API 연동
- 데이터 백업 및 복원
- 감사 로그 시스템

## 트러블슈팅

### 일반적인 문제

#### 이의신청이 로드되지 않는 경우
1. 네트워크 연결 확인
2. Firebase 권한 확인
3. 컬렉션 경로 확인

#### 상태 업데이트가 실패하는 경우
1. 관리자 권한 확인
2. 네트워크 연결 확인
3. Firebase 권한 확인

#### 필터링이 작동하지 않는 경우
1. 필터 조건 확인
2. 데이터 형식 확인
3. 콘솔 에러 확인

### 디버깅 팁
- 브라우저 개발자 도구 활용
- Firebase 콘솔 로그 확인
- 네트워크 탭에서 요청/응답 확인

## 업데이트 로그

### v2.0.0 (현재 버전)
- 고급 필터링 시스템 추가
- 일괄 처리 기능 추가
- 상세 정보 모달 추가
- 통계 대시보드 추가
- UI/UX 대폭 개선
- 실시간 업데이트 기능 추가

### v1.0.0 (이전 버전)
- 기본 이의신청 목록
- 간단한 상태 업데이트
- 기본 필터링

## 라이선스

이 컴포넌트는 MIT 라이선스 하에 배포됩니다.

## 기여하기

버그 리포트, 기능 요청, 풀 리퀘스트를 환영합니다.

## 연락처

문의사항이 있으시면 개발팀에 연락해주세요. 